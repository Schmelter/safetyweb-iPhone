(function() {
<<<<<<< .mine
	
	wayin.gp.views = $.extend(wayin.gp.views,{
		Scoreboard: Backbone.View.extend({
			scoreboardEntries:[],
			highlightedEntry:null,
			events:{
				'click #createPhoto':'createPhoto',
				'click #endEvent':'endEvent'
			},
			createPhoto:function() {
				alert('Create Photo!');
			},
			endEvent:function() {
				alert('End Event!');
			},
			render:function() {
				var html = ich['scoreboard-tpl']({
					
				});
				$(this.el).html(html);
				
				sortedScoreList = wayin.gp.scoreboard.getSortedScoreList();
				for (index in sortedScoreList) {
					var scoreboardEntry = new wayin.gp.views.ScoreboardEntry({
						parent:this,
						score:sortedScoreList[index]
					});
					scoreboardEntry.render();
					this.scoreboardEntries.push(scoreboardEntry);
					$('#scoresection', this.el).append(scoreboardEntry.el);
				}
				
			},
			setHighlighted:function(scoreboardEntry) {
				this.highlightedEntry = scoreboardEntry;
				for (scoreboardEntry in this.scoreboardEntries) {
					if (scoreboardEntry == this.highlightedEntry) continue;
					$(scoreboardEntry.el).find('.scoreentry').removeClass('highlight');
				}
			}
		}),
		ScoreboardEntry: Backbone.View.extend({
			events:{
				'click .scoreentry':'scoreClicked'
			},
			scoreClicked:function() {
				this.parent.setHighlighted(this);
				$(this.el).html.find('scoreentry').addClass('highlight');
			},
			render:function() {
				this.el = ich['scoreboard-entry-tpl']({
					displayName:this.options.score.displayName,
					score:this.options.score.score
				});
			}
		})
	})
=======

    wayin.gp.views = $.extend(wayin.gp.views, {
        Scoreboard:Backbone.View.extend({
            scoreboardEntries:[],
            highlightedEntry:null,
            events:{
                'click #create-photo':'showGameCreateDialog',
                'click #end-event':'endEvent'
            },
            endEvent:function() {
                wayin.app.go('#!/browseEvents');
            },
            showGameCreateDialog:function() {
                var event = this.model;
                var eventId = event.id;
                var game = new wayin.models.Game({
                    game_type:'poll',
                    channel_id:wayin.identity.getMe().get('personal_channel_id'),
                    start_time:'now',
                    event_id:eventId
                });
                var createWidget = new wayin.views.GameCreator({model:game, event_id:eventId});
                createWidget.render();
                var modal = wayin.modal({
                    html:createWidget.el
                });
                createWidget.bind('done', function() {
                    modal.close();
                    wayin.app.go('#!/events/' + eventId);
                });
                return false;
            },
            render:function() {
                var event = this.model;
                var html = ich['scoreboard-tpl']({
                    can_add_games:(event.get('status') === 'LIVE' && event.get('creator').user_id === wayin.identity.getMe().id)
                });
                $(this.el).html(html);

                sortedScoreList = wayin.gp.scoreboard.getSortedScoreList();
                for (index in sortedScoreList) {
                    var scoreboardEntry = new wayin.gp.views.ScoreboardEntry({
                        parent:this,
                        score:sortedScoreList[index]
                    });
                    scoreboardEntry.render();
                    this.scoreboardEntries.push(scoreboardEntry);
                    $('#scoresection', this.el).append(scoreboardEntry.el);
                }

            },
            setHighlighted:function(scoreboardEntry) {
                this.highlightedEntry = scoreboardEntry;
                for (scoreboardEntry in this.scoreboardEntries) {
                    if (scoreboardEntry == this.highlightedEntry) continue;
                    $(scoreboardEntry.el).find('.scoreentry').removeClass('highlight');
                }
            }
        }),
        ScoreboardEntry:Backbone.View.extend({
            events:{
                'click .scoreentry':'scoreClicked'
            },
            scoreClicked:function() {
                this.parent.setHighlighted(this);
                $(this.el).html.find('scoreentry').addClass('highlight');
            },
            render:function() {
                this.el = ich['scoreboard-entry-tpl']({
                    displayName:this.options.score.displayName,
                    score:this.options.score.score
                });
            }
        })
    })
>>>>>>> .r2350
})();